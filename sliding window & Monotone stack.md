# sliding window & Monotone stack

## sliding window 

滑动窗口最常见的问题就是求局部空间内的最大值

### 问题

求数组中长度为3且相邻的数字和的最大值

### 思路

使用双向队列来控制局部空间里数据的进出

> 进数据：
>
> 当右边界向右移动，比较数据和队尾数据的大小，队尾数据 <= 进数据，则尾部出数据，保证队列的大小始终为3，且队头一直为当前窗口的最大值。
>
> 
>
> 出数据：
>
> 当左边界向右移动，比较数据和对头数据的大小，对头数据 = 头部出数据，则头部出数据，否则队列不变(因为此时出的数据并不影响我们窗口中的最大值)

### 思考

#### 队尾数据 = 进数据 ，为什么队尾数据要`pop`出去：

把队尾数据pop出去对窗口的影响比不进数据对窗口的影响要小，可以举实例模拟理解

------

## Monotone stack

单调栈和滑动滑动窗口最明显的相似之处都是要求数据结构中数据都是单调的

### 问题

单调栈典型的题目便是找到数组中每一个数左右离自己最近且比自己大的两个数

### 思路

保证栈单调(由下而上：大->小)的同时，往里压入数据，压入数据大于栈顶数据时，得到栈顶数据的答案：

*左最大：栈中栈顶的下一个数据*

*右最大：准备压入的数据*

依次思路，遍历数组，最终若栈中还有数据，则

*左最大：栈中栈顶的下一个数据，没有则为0*

*右最大：之前压着栈顶的数，没有则为0*

### 思考

#### 为什么这样能保证栈顶的下一个数据为**左最大**

假设栈中有两个数A，B；B在A的上面，首先假设B和A是相邻的关系，那么A和B中间压入过的数据有这几种可能：

- 比A大，不可能，不满足单调
- 比B小，可能，B压入后，将比B小的数全部pop出
- 比B大且比A小，不可能，这样不满足B和A的邻里关系

得出B和A相邻，则B就是A的左最大
